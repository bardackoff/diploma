Докладний опис коду Trading Bot на Binance

---

## Загальний опис

Цей проект — приклад простого торгового бота, що працює з API Binance. Він отримує історичні дані свічок (candlesticks) для криптовалютної пари (наприклад, BTCUSDT), обчислює ковзні середні, робить простий прогноз напрямку ціни та симулює торгові сигнали. Усі дії логуються у файл Excel.

---

## Пояснення по кожному коду (cell)

### 1. Встановлення бібліотеки

```python
pip install python-binance
```

* Встановлює офіційну бібліотеку для роботи з Binance API.
* Потрібна для отримання даних та подальшої взаємодії з біржею.

---

### 2. Імпорт клієнта Binance

```python
from binance.client import Client
```

* Імпортує клас `Client`, який є основним інтерфейсом для спілкування з Binance API.
* Через нього можна отримувати ринкові дані, робити замовлення, перевіряти баланс і т.п.

---

### 3. Налаштування API ключів

```python
api_key = "..."
secret_key = "..."
```

* Змінні з ключами для доступу до Binance API.
* Вони унікальні для вашого акаунта.
* Ключі повинні бути захищені, не викладати у відкритий доступ.
* Дають дозвіл на читання і/або торгівлю залежно від налаштувань.

---

### 4. Ініціалізація клієнта

```python
client = Client(api_key = api_key, api_secret = secret_key, tld = "com")
```

* Створює екземпляр `Client` з використанням ключів.
* Параметр `tld="com"` означає використання глобального сайту Binance.
* Цей об’єкт буде використовуватись для запитів до API.

---

### 5. Визначення ключових параметрів

```python
API_KEY = "..."
API_SECRET = "..."
SYMBOL = 'BTCUSDT'
INTERVAL = Client.KLINE_INTERVAL_1MINUTE
LOOKBACK_PERIOD = 50
CYCLE_DELAY_SECONDS = 60
EXCEL_FILENAME = 'trading_bot_log_1min.xlsx'
```

* Задає основні налаштування роботи бота.
* `SYMBOL` — криптовалютна пара, яку аналізуємо.
* `INTERVAL` — таймфрейм для свічок (1 хвилина).
* `LOOKBACK_PERIOD` — скільки останніх свічок беремо для аналізу.
* `CYCLE_DELAY_SECONDS` — час затримки між ітераціями (60 сек).
* `EXCEL_FILENAME` — ім’я файлу, в який пишемо логи.

---

### 6. Підключення до Binance API

```python
try:
    client = Client(API_KEY, API_SECRET)
    print("Успішно підключено до Binance API")
except Exception as e:
    print(f"Помилка підключення до Binance: {e}")
    exit()
```

* Спроба створити клієнт.
* Якщо є помилка (наприклад, неправильні ключі або проблеми з мережею), програма зупиняється.
* Виводить повідомлення про успішне підключення або помилку.

---

### 7. Функція отримання історичних даних

```python
def get_historical_data(symbol, interval, lookback):
    ...
```

* Запитує у Binance свічкові дані (klines) по вказаному символу і інтервалу.
* Параметр `lookback` визначає, скільки свічок отримати.
* Преобразує сирі дані у pandas DataFrame.
* Приводить типи даних до числових для аналізу.
* Повертає останні N свічок (залежно від `lookback`).

---

### 8. Функція створення ознак

```python
def create_features(df):
    ...
```

* Створює додаткові колонки для аналітики:

  * Ковзна середня за 10 періодів (SMA\_10)
  * Ковзна середня за 30 періодів (SMA\_30)
  * Відсоткова зміна ціни (Return)
* Виконує очищення даних — видаляє рядки з пропусками (NaN).
* Повертає останній рядок з обчисленими ознаками (самі свіжі значення).

---

### 9. Функція прогнозування

```python
def make_prediction(features_row):
    ...
```

* Приймає останній рядок ознак.
* Простою логікою порівнює SMA\_10 і SMA\_30:

  * Якщо SMA\_10 більша — прогнозує, що ціна піде вгору (1).
  * Інакше — вниз (0).
* Якщо неможливо зробити прогноз (наприклад, NaN) — повертає None.

---

### 10. Функція симуляції торгової логіки

```python
def execute_trade_logic(prediction, symbol):
    ...
```

* На основі прогнозу повертає торгову дію:

  * `BUY_SIGNAL` при прогнозі росту.
  * `SELL_SIGNAL` при падінні.
  * `HOLD` якщо немає чіткого прогнозу.
* Виводить інформаційні повідомлення про сигнали.
* Це лише симуляція, фактичні ордери не створюються.

---

### 11. Функція логування в Excel

```python
def log_to_excel(filename, data_dict):
    ...
```

* Додає один рядок даних у Excel-файл.
* Якщо файл існує — зчитує і додає нові дані в кінець.
* Якщо ні — створює новий.
* Використовує бібліотеку `openpyxl` для роботи з Excel.
* Логи включають час, символ, останню ціну, значення SMA, прогноз і дію.

---

### 12. Головний цикл роботи бота

```python
while True:
    ...
```

* Безкінечний цикл, що повторює кроки:

  1. Отримання історичних даних
  2. Обчислення ознак
  3. Прогноз
  4. Симуляція торгової дії
  5. Логування у файл
* В кінці кожної ітерації — пауза на `CYCLE_DELAY_SECONDS`.
* Обробка помилок та можливість зупинки через Ctrl+C.
* Виводить детальні повідомлення про стан роботи.

---

## Важливі зауваження

* Код призначений лише для ілюстрації концепції.
* Використовуйте виключно для навчання і розробки.

